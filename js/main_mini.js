var $=function(b){return document.getElementById(b)},App={getDefaultSiteKey:function(){if(chrome&&chrome.tabs){var b=this;chrome.tabs.getSelected(null,function(a){if(a.url){var a=a.url.match(/^[\w-]+:\/*\[?([\w\.:-]+)\]?(?::\d+)?/)[1],c=window.localStorage.getItem(a);if(!c)var c=a.split("."),d=/com|edu|gov|net|org|info/,c=c.length<=2||c[1].match(d)?c[0]:c[1];b.domain=a;b.sitekey=c;$("site_key").value=c;$("master_key").value&&onSubmitSiteKey()}})}},onSubmitSiteKey:function(){var b=$("site_key").value,
a=$("master_key").value,a=Crypto.util.bytesToBase64(Crypto.HMAC(Crypto.MD5,b,a,{asBytes:!0})),a=a.replace(/=+$/,"").replace(/\+|\//g,"").substring(0,20);$("output_key").value=a;$("output_key").focus();$("output_key").select();b&&b!=this.sitekey&&window.localStorage.setItem(this.domain,b)},setFocus:function(){$("master_key").value?$("site_key").focus():$("master_key").focus()}};
